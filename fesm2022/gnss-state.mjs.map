{"version":3,"file":"gnss-state.mjs","sources":["../../../projects/gnss-state/src/lib/state.service.ts","../../../projects/gnss-state/src/public-api.ts","../../../projects/gnss-state/src/gnss-state.ts"],"sourcesContent":["// Angular Imports\r\nimport { Injectable } from '@angular/core';\r\n// RxJs Imports\r\nimport { BehaviorSubject } from 'rxjs';\r\n// Types\r\nimport { StateObjType } from 'src/types/state-obj.type';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class StateService {\r\n  // -------------------- SUBSCRIPTIONS -------------------- //\r\n\r\n  // -------------------- SUBSCRIBER_ATTRIBUTES -------------------- //\r\n\r\n  // -------------------- SUBSCRIBER_OBJECT_REFERENCES -------------------- //\r\n\r\n  // -------------------- ATTRIBUTES -------------------- //\r\n\r\n  // -------------------- OBJECTS -------------------- //\r\n  /**\r\n   * A Directory of objects that can be used to 'reset' a modified object to its\r\n   * original value. Certain methods such as setSubject() or setGroupSubject()\r\n   * will set the backupObj to that value. Otherwise, update() and\r\n   * updateGroupSubject() will not affect the backups copy. This allows\r\n   * [reset buttons]{@link ResetBtn} or [close dialogue buttons]{@link CloseDialogBtn}\r\n   * to reset any unwanted changes to their original values.\r\n   */\r\n  public backups: Record<string, StateObjType> = {};\r\n  /**\r\n   * A Directory of Behavior Subjects that can be subscribed to by any component\r\n   * on the site. A Directory is a specific term for this framework where\r\n   * instead of using an array of objects, we use an object where the top-level\r\n   * keys are the name of the object, and the value is the object itself.\r\n   */\r\n  public dir: Record<string, BehaviorSubject<StateObjType>> = {};\r\n  public groupList = new BehaviorSubject<string[]>([]);\r\n  public groupBackups: Record<string, Record<string, StateObjType>> = {};\r\n  public groups: Record<string, Record<string, BehaviorSubject<StateObjType>>> =\r\n    {};\r\n  public updated: BehaviorSubject<string | undefined> = new BehaviorSubject<\r\n    string | undefined\r\n  >(undefined);\r\n\r\n  // -------------------- CONSTRUCTOR -------------------- //\r\n\r\n  // -------------------- LIFE_CYCLE_HOOKS -------------------- //\r\n\r\n  // -------------------- INITIATOR_LOADER_METHODS -------------------- //\r\n\r\n  // -------------------- SUBSCRIBER_METHODS -------------------- //\r\n\r\n  // -------------------- SERVICE_METHODS -------------------- //\r\n  /**\r\n   * A method that returns the subject values of all of the current 'dir' object.\r\n   * These values are returned in a 'Directory' format where the primary keys of\r\n   * the Directory object are the names of each object, and the value is the\r\n   * object itself.\r\n   *\r\n   * @param {string} [groupName] The name of the group that contains all of the objects that will be returned.\r\n   * @returns A directory of all of the Behavior Subject values contained in the Directory Service's 'dir' object.\r\n   */\r\n  public getDirValues(\r\n    groupName: string | null = null,\r\n  ): Record<string, StateObjType> {\r\n    const subjectDirectory: Record<string, StateObjType> = {};\r\n    if (!groupName) {\r\n      for (const key in this.dir) {\r\n        subjectDirectory[key] = this.value(key);\r\n      }\r\n    }\r\n    if (groupName && groupName in this.groups) {\r\n      for (const key in this.groups[groupName]) {\r\n        subjectDirectory[key] = this.value(key, groupName);\r\n      }\r\n    }\r\n    return subjectDirectory;\r\n  }\r\n\r\n  /**\r\n   * Checks to see if a BehaviorSubject with the name 'subjectName' exists in\r\n   * the directory. If the 'gorupName' parameter is provided, the method checks\r\n   * to see if a group with that name exists and if so, if it has a\r\n   * BehaviorSubject with the name equal to the value of the 'subjectName'\r\n   * parameter. If any of the checks pass, the method returns true, otherwise it\r\n   * returns false.\r\n   *\r\n   * @param {string} [subjectName] The name of a BehaviorSubject that the method will use to check if it exists in the directory or a nested group if the 'groupName' parameter is provided.\r\n   * @param {string} [groupName] The name of a group of nested BehaviorSubjects in the directory that is being checked.\r\n   * @returns A boolean value, true if the subject exists in the directory or within a group, false otherwise.\r\n   */\r\n  public has(subjectName: string, groupName: string | null = null): boolean {\r\n    if (!groupName) {\r\n      if (this.dir[subjectName]) {\r\n        return true;\r\n      }\r\n    }\r\n    if (groupName) {\r\n      if (this.groups[groupName] && this.groups[groupName][subjectName]) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Creates a new BehaviorSubject with the name given in the 'subjectName'\r\n   * parameter with a starting value of undefined. If the BehaviorSubject with\r\n   * that name already exists it will update that value to undefined. If the\r\n   * 'groupName' parameter is provided, the method will create or reset a\r\n   * BehaviorSubject nested in that group, or even create the group if it also\r\n   * doesn't exist. The corresponding object in backups will be created or\r\n   * reset to a value of undefined, and if it's a new BehaviorSubject, its name\r\n   * will be added to the directory's 'list'.\r\n   * @param subjectName\r\n   * @param groupName\r\n   */\r\n  public initiate(subjectName: string, groupName: string | null = null): void {\r\n    if (subjectName) {\r\n      if (!groupName) {\r\n        if (!this.dir[subjectName]) {\r\n          this.dir[subjectName] = new BehaviorSubject<StateObjType>(undefined);\r\n          this.backups[subjectName] = undefined;\r\n        } else {\r\n          this.dir[subjectName].next(undefined);\r\n          this.backups[subjectName] = undefined;\r\n        }\r\n      }\r\n      if (groupName) {\r\n        if (!this.groups[groupName]) {\r\n          this.groups[groupName] = {};\r\n          this.groupBackups[groupName] = {};\r\n        }\r\n        if (!this.groups[groupName][subjectName]) {\r\n          this.groups[groupName][subjectName] =\r\n            new BehaviorSubject<StateObjType>(undefined);\r\n          this.groupBackups[groupName][subjectName] = undefined;\r\n        } else {\r\n          this.groups[groupName][subjectName].next(undefined);\r\n          this.groupBackups[groupName][subjectName] = undefined;\r\n        }\r\n      }\r\n    }\r\n    this.updated.next(subjectName);\r\n  }\r\n\r\n  /**\r\n   * Creates a 'group' inside of the Directory Service's 'dir' object. While the\r\n   * group itself will not be a Behavior Subject, any nested object within it will\r\n   * be a Behavior Subject. At the moment the only Directory Service that has\r\n   * nested groups is the [User Interface Directory]{@link UiDirectory}, and it\r\n   * consists of groups such as buttons, cards, and containers. This method will\r\n   * however create a 'group' in any directory.\r\n   * @param groupName The name of the group.\r\n   * @param keyName An optional argument that will create a nested key within the groupName.\r\n   * @param objArray An optional argument that is an array of objects that will be set as Behavior Subjects within the Directory Service's 'dir' object under the group name that was specified by the keyName parameter.\r\n   */\r\n  public loadGroup(\r\n    groupName: string,\r\n    keyName: string | null = null,\r\n    objArray: unknown[] | null = null,\r\n  ): void {\r\n    if (!this.groups[groupName]) {\r\n      this.groups[groupName] = {};\r\n    }\r\n    if (keyName && objArray && objArray.length > 0) {\r\n      for (const obj of objArray) {\r\n        // Check if keyName exists in obj and if the value is a string\r\n        if (typeof obj === 'object' && obj !== null && keyName in obj) {\r\n          const castedObj = obj as Record<string, unknown>;\r\n          const objName = castedObj[keyName];\r\n          if (typeof objName === 'string' || typeof objName === 'number') {\r\n            this.groups[groupName][objName] = new BehaviorSubject<StateObjType>(\r\n              castedObj,\r\n            );\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (!this.groupList.value.includes(groupName)) {\r\n      const listValue = JSON.parse(JSON.stringify(this.groupList.value));\r\n      listValue.push(groupName);\r\n      this.groupList.next(listValue);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns a BehaviorSubject that the calling method can subscribe to. If the\r\n   * BehaviorSubject is nested within a directory group, the second parameter\r\n   * should be the name of the group the method is stored in. If the group\r\n   * and/or the BehaviorSubject don't exist, the method will initiate one or\r\n   * both but the BehaviorSubject in this instance will have a default value of\r\n   * undefined. This will allow the calling method to subscribe to a directory\r\n   * object that does not yet exists but whose value will be set or updated by\r\n   * another method.\r\n   *\r\n   * @param {string} [subjectName] The name of a BehaviorSubject that exists in the director.\r\n   * @param {string} [groupName] The name of a group that the BehaviorSubject is nested in. Defaults to null, which means the BehaviorSubject is not nested in a group.\r\n   * @returns {BehaviorSubject} A BehaviorSubject that the calling method can subscribe to.\r\n   */\r\n  public observe(\r\n    subjectName: string,\r\n    groupName: string | null = null,\r\n  ): BehaviorSubject<StateObjType> {\r\n    if (!groupName) {\r\n      if (!this.dir[subjectName]) {\r\n        this.initiate(subjectName);\r\n      }\r\n      return this.dir[subjectName];\r\n    }\r\n    if (groupName) {\r\n      if (!this.groups[groupName]) {\r\n        this.initiate(subjectName, groupName);\r\n      }\r\n      if (!this.groups[groupName][subjectName]) {\r\n        this.initiate(subjectName, groupName);\r\n      }\r\n    }\r\n    return this.groups[groupName][subjectName];\r\n  }\r\n\r\n  /**\r\n   * Removes an entire group within the Directory Service's [dir]{@link DirectoryModel#dir}\r\n   * object and any [BehaviorSubject]{@link https://www.learnrxjs.io/learn-rxjs/subjects/behaviorsubject}\r\n   * that are nested within it.\r\n   * @param groupName The name of the group to be removed.\r\n   */\r\n  public removeGroup(groupName: string): void {\r\n    if (this.groups[groupName]) {\r\n      delete this.groups[groupName];\r\n    }\r\n    if (this.groupList.value.includes(groupName)) {\r\n      const itemIndex = this.groupList.value.indexOf(groupName);\r\n      const listValue = JSON.parse(JSON.stringify(this.groupList.value));\r\n      listValue.splice(itemIndex, 1);\r\n      this.groupList.next(listValue);\r\n    }\r\n    if (this.groupBackups[groupName]) {\r\n      delete this.groupBackups[groupName];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * A method that is typically called by a [Reset Button]{@link ResetBtn} or\r\n   * the closing of a [Dialog]{@link DialogModel} without [saving]{@link SaveBtn}.\r\n   * @param subjectName The name of the Behavior Subject that is to be reset by the method.\r\n   */\r\n  public reset(subjectName: string, groupName: string | null = null): void {\r\n    if (!groupName) {\r\n      if (this.dir[subjectName] && this.backups[subjectName]) {\r\n        const backupObjCopy = JSON.parse(\r\n          JSON.stringify(this.backups[subjectName]),\r\n        );\r\n        this.dir[subjectName].next(backupObjCopy);\r\n      }\r\n    }\r\n    if (groupName) {\r\n      if (\r\n        this.groups[groupName] &&\r\n        this.groups[groupName][subjectName] &&\r\n        this.groupBackups[groupName] &&\r\n        this.groupBackups[groupName][subjectName]\r\n      ) {\r\n        const backupObjCopy = JSON.parse(\r\n          JSON.stringify(this.groupBackups[groupName][subjectName]),\r\n        );\r\n        this.groups[groupName][subjectName].next(backupObjCopy);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets a new BehaviorSubject in the directory and the backup object. If the\r\n   * BehaviorSubject already exists, it sets a deep clone to the backup object\r\n   * to the value provided in the initialValue parameter. If the groupName\r\n   * parameter is provided, both the BehaviorSubject and the backup are nested\r\n   * in a group with the same name as the groupName value.\r\n   *\r\n   * @param subjectName The name of the subject that will be added to the directory as a BehaviorSubject.\r\n   * @param initialValue The initial value that the BehaviorSubject will have. This will also be added or set to the backups object.\r\n   * @param groupName The name of a group that the BehaviorSubject will be nested in.\r\n   */\r\n  public set(\r\n    subjectName: string,\r\n    initialValue: StateObjType,\r\n    groupName: string | null = null,\r\n  ): void {\r\n    let value: StateObjType;\r\n    if (value) {\r\n      value = JSON.parse(JSON.stringify(initialValue));\r\n    } else {\r\n      value = initialValue;\r\n    }\r\n    if (!groupName) {\r\n      if (!this.dir[subjectName]) {\r\n        if (initialValue as StateObjType) {\r\n          this.dir[subjectName] = new BehaviorSubject(value);\r\n        } else {\r\n          this.dir[subjectName] = new BehaviorSubject(initialValue);\r\n        }\r\n      } else {\r\n        this.dir[subjectName].next(value);\r\n      }\r\n      this.backups[subjectName] = value;\r\n      this.updated.next(subjectName);\r\n    }\r\n    if (groupName) {\r\n      if (!this.groups[groupName]) {\r\n        this.groups[groupName] = {};\r\n      }\r\n      if (!this.groups[groupName][subjectName]) {\r\n        this.groups[groupName][subjectName] = new BehaviorSubject<StateObjType>(\r\n          value,\r\n        );\r\n      } else {\r\n        this.groups[groupName][subjectName].next(value);\r\n      }\r\n      if (!this.groupBackups[groupName]) {\r\n        this.groupBackups[groupName] = {};\r\n      }\r\n      this.groupBackups[groupName][subjectName] = value;\r\n      this.updated.next(subjectName);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns a deep clone of the value of a BehaviorSubject.\r\n   *\r\n   * @param subjectName The name of the BehaviorSubject.\r\n   * @param groupName The name of a group. Defaults to null.\r\n   * @returns The value of a BehaviorSubject or null if it and/or the group doesn't exist.\r\n   */\r\n  public value(subjectName: string, groupName: string | null = null) {\r\n    if (!groupName && this.dir[subjectName]) {\r\n      if (this.dir[subjectName].value) {\r\n        const valueClone = JSON.parse(\r\n          JSON.stringify(this.dir[subjectName].value),\r\n        );\r\n        return valueClone;\r\n      }\r\n      if (this.dir[subjectName].value === false) {\r\n        return false;\r\n      }\r\n    }\r\n    if (\r\n      groupName &&\r\n      this.groups[groupName] &&\r\n      subjectName in this.groups[groupName]\r\n    ) {\r\n      const value = this.groups[groupName][subjectName].value;\r\n      if (value) {\r\n        const valueClone = JSON.parse(JSON.stringify(value));\r\n        return valueClone;\r\n      } else {\r\n        return value;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Updates the value of a behavior subject with the name specified in 'subjectName'\r\n   * with the value specified in 'newValue'. If the event doesn't exist as a\r\n   * nested behavior subject in the 'dir' object, the method will call the\r\n   * createSubject method and pass on the two parameters as arguments.\r\n   *\r\n   * @param {string} subjectName - The name of the event to be updated.\r\n   * @param {string|boolean|number} newValue - The new value to be passed to the Behavior Subject's next method.\r\n   * @param {string} groupName - The name of the group an object is stored in.\r\n   */\r\n  public update(\r\n    subjectName: string,\r\n    newValue: StateObjType,\r\n    groupName: string | null = null,\r\n  ): void {\r\n    let valueCopy: StateObjType;\r\n    if (newValue) {\r\n      valueCopy = JSON.parse(JSON.stringify(newValue));\r\n    } else {\r\n      valueCopy = newValue;\r\n    }\r\n\r\n    if (!groupName) {\r\n      if (this.dir[subjectName]) {\r\n        this.dir[subjectName].next(valueCopy);\r\n      } else {\r\n        this.set(subjectName, valueCopy);\r\n      }\r\n    }\r\n    if (groupName) {\r\n      if (!this.groups[groupName]) {\r\n        this.groups[groupName] = {};\r\n      }\r\n      if (this.groups[groupName][subjectName]) {\r\n        this.groups[groupName][subjectName].next(valueCopy);\r\n      } else {\r\n        this.set(subjectName, valueCopy, groupName);\r\n      }\r\n    }\r\n  }\r\n}\r\n","/*\r\n * Public API Surface of gnss-state\r\n */\r\n\r\nexport * from './lib/state.service';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}